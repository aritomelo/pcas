# Put parameters here that don't need to change on each machine where the app is deployed
# https://symfony.com/doc/current/best_practices/configuration.html#application-related-configuration
# Put parameters here that don't need to change on each machine where the app is deployed
# https://symfony.com/doc/current/best_practices/configuration.html#application-related-configuration
parameters:
    locale: en
    pcas:
      logger_startup_message: 'Logger just got started!!! (from demo app config)'
      protocol:
        login:
          uri: http://127.0.0.1:8001/login
        servicevalidate:
          uri: http://127.0.0.1:8001/serviceValidate
          query:
            userDetails: 'true'
            groups: '*'
          allowed_parameters:
            - service
            - ticket
            - pgtUrl
            - renew
            - format
            - userDetails
            - groups
        logout:
          uri: https://ecas.ec.europa.eu/cas/logout
      group_filters: ['*']

services:
    # default configuration for services in *this* file
    _defaults:
        # automatically injects dependencies in your services
        autowire: true
        # automatically registers your services as commands, event subscribers, etc.
        autoconfigure: true
        # this means you cannot fetch services directly from the container via $container->get()
        # if you need to do this, you can override this setting on individual services
        public: false

    # makes classes in src/ available to be used as services
    # this creates a service per class whose id is the fully-qualified class name
    App\:
        resource: '../src/*'
        # you can exclude directories or files
        # but if a service is unused, it's removed anyway
        exclude: '../src/{Entity,Migrations,Tests}'

    # controllers are imported separately to make sure they
    # have the tag that allows actions to type-hint services
    App\Controller\:
        resource: '../src/Controller'
        tags: ['controller.service_arguments']

    pcas:
        class: drupol\pcas\PCas
        arguments: ['%pcas%']

    pcas.PCasGuardAuthenticator:
          class: drupol\pcas\Security\PCasGuardAuthenticator
          arguments: ['@pcas']

    pcas.PCasUserProvider:
          class: drupol\pcas\Security\Core\User\PCasUserProvider

    pcas.session:
          class: Symfony\Component\HttpFoundation\Session\Session
          arguments: ["@session.storage", "@session.namespacedattributebag", "@session.flash_bag"]

    session.storage:
          class: Symfony\Component\HttpFoundation\Session\Storage\NativeSessionStorage

    session.flash_bag:
          class: Symfony\Component\HttpFoundation\Session\Flash\FlashBag

    session.namespacedattributebag:
          class: Symfony\Component\HttpFoundation\Session\Attribute\NamespacedAttributeBag

